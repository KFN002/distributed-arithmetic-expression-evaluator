# distributed-arithmetic-expression-evaluator

**Быстрый запуск: Запустите файл backend/orchestrator/main.go - все должно работать**

**!Перед запуском убедитесь, что у вас последняя версия!**

* Куда идти потом? http://localhost:8080/
* В целом можно не тестить, все работает, да и я постарался)
* Если будет проблема с gcc, надо будет его установить и добавить его в переменные окружения:
* https://stackoverflow.com/questions/43580131/exec-gcc-executable-file-not-found-in-path-when-trying-go-build
* https://discourse.gohugo.io/t/golang-newbie-keen-to-contribute/35087
* https://github.com/golang/go/issues/47215
* Ссылки сверху точно должны помочь в fix'е проблемы.



**Как все устроено?**

1. backend - весь бэк по пакетам.
2. static - весь фронт: assets - .html templates и .css файл. Scripts - пустой .js файл.


**Поподробнее, но не слишком:**
1. dataManager
* librarian.go - отвечает за работу с базой данных, то есть там находятся все функции для получения/изменения данных в базе.
2. orchestratorAndAgent 
* orchestratorAndAgent.go - занимается получением ответа на выражение: получает выражение через очередь от оркестратора и распределяет его на мелкие таски, считает, а после собирает весь ответ и закидывает в базу данных.
3. handlers
* handlers.go - обработка запросов пользователя: получение всех выражений, получение выражения по id, изменение времени работы операции и тд.
4. models 
* expression - структура выражения
* operations - структура числовых операций: время их выполнения
* serversData - структура и пара функций для серверов (горутин) - их состояния, тасок
* stack - стек с методами
5. cmd 
* main.go - запуск сервера, раньше там же был и файл handlers, но разумнее оказалось его закинуть в отдельный модуль.
6. tests 
* test.go - тесты, созданные для первых версий сервера, скорее всего файл будет пустым.
7. utils
* utils.go - вспомогательные функции, в основном проверка корректности выражения.
8. cacheMaster
* cacheMaster.go - кэш для хранения времени операций, чтобы часто не обращаться к базе данных. Удобно, так как время операций назначает пользователь (само не меняется)
9. queueMaster
* queueMaster.go - реализация очереди 


**Cхема**





@RR7B7